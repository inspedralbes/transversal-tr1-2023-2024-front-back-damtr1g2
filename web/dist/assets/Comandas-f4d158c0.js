import{l as D,V as _,a as F,b as u}from"./index-03155f85.js";import{c as B,_ as x,F as w,G as T,H as I,L as n,U as V,A as e,N as a,$ as P,a0 as N,T as o,D as d,a1 as h,X as b,Y as y,M as m,a2 as f,S as k,Z as A}from"./index-801748b1.js";import"./md5-dca883ad.js";import{V as g,a as c}from"./VCard-5204a1d2.js";import{V as S}from"./VCardTitle-21b8677f.js";const q=B("v-spacer","div","VSpacer");const v=D("globalmarketapp.dam.inspedralbes.cat/server"),z={data(){return{loginInvalid:!1,usuari:{nom:"",cognoms:"",email:"",password:""},loading:!1,show1:!1,rules:{required:l=>!!l||"Requerit"},drawer:!1,auth:!1,dialogVisible:!1,dialogComVisible:!1,claseDialog:"",username:"",estadoComanda:null,comandaSeleccionada:void 0,opcioSeleccionada:void 0,selectedFilter:null,selectedButton:"",userPicture:{type:String,default:""},comandas:[],filteredComandas:[],selectedButton:null,selectedFilter:null}},async created(){await this.fetchComandas()},methods:{clearFilters(){this.selectedFilter=null,this.filteredComandas=this.comandas},async fetchComandas(){try{this.comandas=await w(),this.filteredComandas=this.comandas,console.log("Lista comandas: ",this.comandas),console.log("Comandas recibidos correctamente")}catch(l){console.error("Error fetching comandas:",l)}},filterByStatus(l){l==null?this.filteredComandas=this.comandas:(this.selectedFilter=l,this.filteredComandas=this.comandas.filter(t=>t.estado===l))},aceptarComanda(l){v.emit("aceptarComanda",{idComanda:l})},rechazarComanda(l){v.emit("rechazarComanda",{idComanda:l})},prepararComanda(l){v.emit("prepararComanda",{idComanda:l})},selectComanda(l){this.estadoComanda=l},cerrarDialog(){this.dialogVisible=!1,this.dialogComVisible=!1,this.claseDialog=""},mostrarDatosComanda(l){this.comandaSeleccionada=this.comandas.find(t=>t.id===l),console.log(this.comandaSeleccionada),this.comandaSeleccionada&&this.comandaSeleccionada.lista_productos?this.dialogComVisible=!0:console.error("Undefined comanda or lista_productos")},async addData(){try{const l={nom:this.addInfo.nom,descripcio:this.addInfo.descripcio,preu:this.addInfo.preu,quantitat:this.addInfo.quantitat,imatge:this.addInfo.imatge,id_categoria:this.addInfo.id_categoria};T(this.addInfo).then(t=>{this.cerrarDialog(),console.log(t),this.productes=I(),this.$forceUpdate()}).catch(t=>{this.cerrarDialog(),console.error("Error:",t)})}catch(l){console.log("No ha sido posible añadir la información"+l)}this.cerrarDialog(),console.log("cerrando dialog")},logout(){this.auth=!1}}};function L(l,t,E,R,i,r){return n(),V("div",null,[e(P,{app:"",class:"filterBar"},{default:a(()=>[e(N,null,{default:a(()=>[o("Comandas Top Bar")]),_:1}),e(q),e(d,{text:"",class:h({active:i.selectedFilter===0}),onClick:t[0]||(t[0]=s=>r.filterByStatus(0))},{default:a(()=>[o(" Pendents ")]),_:1},8,["class"]),e(d,{text:"",class:h({active:i.selectedFilter===1}),onClick:t[1]||(t[1]=s=>r.filterByStatus(1))},{default:a(()=>[o(" En preparació ")]),_:1},8,["class"]),e(d,{text:"",class:h({active:i.selectedFilter===2}),onClick:t[2]||(t[2]=s=>r.filterByStatus(2))},{default:a(()=>[o(" Llest ")]),_:1},8,["class"]),e(d,{text:"",class:h({active:i.selectedFilter===3}),onClick:t[3]||(t[3]=s=>r.filterByStatus(3))},{default:a(()=>[o(" Recogit ")]),_:1},8,["class"])]),_:1}),e(_,{class:"fill-height comandas-row"},{default:a(()=>[e(u,{cols:"13"},{default:a(()=>[e(g,{color:"blue lighten-2",class:"fill-height"},{default:a(()=>[e(S,null,{default:a(()=>[o("Lista de comandas")]),_:1}),e(c,null,{default:a(()=>[(n(!0),V(b,null,y(i.filteredComandas,(s,p)=>(n(),m(g,{onClick:C=>r.selectComanda(s.id),key:p,color:"white lighten-3",class:"mb-3"},{default:a(()=>[e(c,null,{default:a(()=>[o("Comanda "+f(s.id),1)]),_:2},1024),e(d,{variant:"plain",onClick:C=>r.mostrarDatosComanda(s.id)},{default:a(()=>[o("Datos Comanda")]),_:2},1032,["onClick"]),i.selectedFilter===0?(n(),m(d,{key:0,onClick:C=>r.aceptarComanda(s.id)},{default:a(()=>[o("Aceptar")]),_:2},1032,["onClick"])):k("",!0),i.selectedFilter===0?(n(),m(d,{key:1,onClick:C=>r.rechazarComanda(s.id)},{default:a(()=>[o("Rechazar")]),_:2},1032,["onClick"])):k("",!0),i.selectedFilter===1?(n(),m(d,{key:2,onClick:C=>r.prepararComanda(s.id)},{default:a(()=>[o("Preparado para recoger")]),_:2},1032,["onClick"])):k("",!0)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}),e(F,{class:"dialogProds",modelValue:i.dialogComVisible,"onUpdate:modelValue":t[5]||(t[5]=s=>i.dialogComVisible=s)},{default:a(()=>[e(g,{class:"justify-center"},{default:a(()=>[e(S,null,{default:a(()=>[o("DATOS COMANDA")]),_:1}),(n(!0),V(b,null,y(this.comandaSeleccionada.lista_productos,(s,p)=>(n(),m(g,{key:p,color:"white lighten-3",class:"mb-3 justify-center"},{default:a(()=>[e(c,null,{default:a(()=>[e(_,{class:"fill-height"},{default:a(()=>[e(u,{cols:"3"},{default:a(()=>[e(A,{src:s.imatge,width:"100px",height:"auto"},null,8,["src"])]),_:2},1024),e(u,{cols:"4"},{default:a(()=>[e(c,{class:"nom",label:"Nom"},{default:a(()=>[o(f(s.nom),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(_,null,{default:a(()=>[e(u,{cols:"4"},{default:a(()=>[e(c,{class:"nom",label:"Preu"},{default:a(()=>[o("Precio Individual: "+f(s.preu)+"€",1)]),_:2},1024)]),_:2},1024),e(u,{cols:"4"},{default:a(()=>[e(c,{class:"nom",label:"Quantitat"},{default:a(()=>[o("Cantidad: "+f(s.quantitat),1)]),_:2},1024)]),_:2},1024),e(u,{cols:"4"},{default:a(()=>[e(c,{class:"nom",label:"PreuTotal"},{default:a(()=>[o("Precio Total: "+f(s.preuTotal)+"€",1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(d,{onClick:t[4]||(t[4]=s=>r.cerrarDialog())},{default:a(()=>[o("Salir")]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const H=x(z,[["render",L]]);export{H as default};
