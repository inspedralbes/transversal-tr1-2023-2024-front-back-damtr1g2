import{c as F,p as R,I as $,m as U,a as j,b as H,d as M,e as O,f as Q,g as G,h as J,i as K,j as W,k as X,u as Y,l as u,n as Z,o as ee,q as ae,r as te,s as oe,t as se,v as ie,w as le,x as ne,y as re,z as ce,A as o,B as de,V as ue,C as p,D as V,E as me,_ as he,F as fe,G as ge,H as m,J as pe,K as ye,L as y,M as v,N as r,O as ve,P as _,Q as Ce,R as C,S as be,T as Ve}from"./index-801748b1.js";import{m as _e}from"./md5-dca883ad.js";import{V as ke}from"./VCardTitle-21b8677f.js";import{V as Ie,a as b}from"./VForm-eacf991c.js";const Pe=F("v-alert-title"),xe=["success","info","warning","error"],Se=R({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:$,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>xe.includes(e)},...U(),...j(),...H(),...M(),...O(),...Q(),...G(),...J(),...K(),...W({variant:"flat"})},"VAlert"),De=X()({name:"VAlert",props:Se(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,a){let{emit:i,slots:t}=a;const s=Y(e,"modelValue"),l=u(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),n=u(()=>({color:e.color??e.type,variant:e.variant})),{themeClasses:k}=Z(e),{colorClasses:I,colorStyles:P,variantClasses:x}=ee(n),{densityClasses:S}=ae(e),{dimensionStyles:D}=te(e),{elevationClasses:w}=oe(e),{locationStyles:B}=se(e),{positionClasses:T}=ie(e),{roundedClasses:q}=le(e),{textColorClasses:z,textColorStyles:L}=ne(re(e,"borderColor")),{t:N}=ce(),h=u(()=>({"aria-label":N(e.closeLabel),onClick(d){s.value=!1,i("click:close",d)}}));return()=>{const d=!!(t.prepend||l.value),A=!!(t.title||e.title),E=!!(t.close||e.closable);return s.value&&o(e.tag,{class:["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},k.value,I.value,S.value,w.value,T.value,q.value,x.value,e.class],style:[P.value,D.value,B.value,e.style],role:"alert"},{default:()=>{var f,g;return[de(!1,"v-alert"),e.border&&o("div",{key:"border",class:["v-alert__border",z.value],style:L.value},null),d&&o("div",{key:"prepend",class:"v-alert__prepend"},[t.prepend?o(p,{key:"prepend-defaults",disabled:!l.value,defaults:{VIcon:{density:e.density,icon:l.value,size:e.prominent?44:28}}},t.prepend):o(ue,{key:"prepend-icon",density:e.density,icon:l.value,size:e.prominent?44:28},null)]),o("div",{class:"v-alert__content"},[A&&o(Pe,{key:"title"},{default:()=>{var c;return[((c=t.title)==null?void 0:c.call(t))??e.title]}}),((f=t.text)==null?void 0:f.call(t))??e.text,(g=t.default)==null?void 0:g.call(t)]),t.append&&o("div",{key:"append",class:"v-alert__append"},[t.append()]),E&&o("div",{key:"close",class:"v-alert__close"},[t.close?o(p,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var c;return[(c=t.close)==null?void 0:c.call(t,{props:h.value})]}}):o(V,me({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},h.value),null)])]}})}}});const we={data(){return{loginInvalid:!1,usuari:{nom:"",cognoms:"",email:"",password:""},loading:!1,show1:!1,rules:{required:e=>!!e||"Requerit"},drawer:!1,username:"",opcioSeleccionada:void 0,selectedButton:"",userPicture:{type:String,default:""},comandas:[],filteredComandas:[],productes:[],selectedButton:null}},methods:{async fetchComandas(){try{this.comandas=await fe(),this.filteredComandas=this.comandas,console.log("Lista comandas: ",this.comandas),console.log("Comandas recibidos correctamente")}catch(e){console.error("Error fetching comandas:",e)}},filterByStatus(e){e==null?this.filteredComandas=this.comandas:(this.selectedFilter=e,this.filteredComandas=this.comandas.filter(a=>a.estado===e))},aceptarComanda(e){socket.emit("aceptarComanda",e)},rechazarComanda(e){socket.emit("rechazarComanda",e)},prepararComanda(e){socket.emit("prepararComanda",e)},mostrarDialogo(e,a){if(console.log("ID del producto a editar: ",a),a!=null){this.opcioSeleccionada=a;const i=this.productes.find(t=>t.id===a);console.log("Producto a editar: ",i),this.editInfo={campoNom:i.nom,campoDesc:i.descripcio,campoPreu:i.preu,campoQuantitat:i.quantitat,campoImg:i.imatge,campoCat:i.id_categoria,campoId:i.id}}this.dialogVisible=!0,this.claseDialog=e},selectComanda(e){this.estadoComanda=e},cerrarDialog(){this.dialogVisible=!1,this.dialogComVisible=!1,this.claseDialog=""},mostrarDatosComanda(e){this.comandaSeleccionada=this.comandas.find(a=>a.id===e),console.log(this.comandaSeleccionada),this.comandaSeleccionada&&this.comandaSeleccionada.lista_productos?this.dialogComVisible=!0:console.error("Undefined comanda or lista_productos")},async addData(){try{const e={nom:this.addInfo.nom,descripcio:this.addInfo.descripcio,preu:this.addInfo.preu,quantitat:this.addInfo.quantitat,imatge:this.addInfo.imatge,id_categoria:this.addInfo.id_categoria};ge(this.addInfo).then(a=>{this.cerrarDialog(),console.log(a),this.productes=m(),this.$forceUpdate()}).catch(a=>{this.cerrarDialog(),console.error("Error:",a)})}catch(e){console.log("No ha sido posible añadir la información"+e)}this.cerrarDialog(),console.log("cerrando dialog")},async editData(){try{const e={nom:this.editInfo.campoNom,descripcio:this.editInfo.campoDesc,preu:this.editInfo.campoPreu,quantitat:this.editInfo.campoQuantitat,imatge:this.editInfo.campoImg,id_categoria:this.editInfo.campoCat,id:this.editInfo.campoId};console.log(),pe(e).then(a=>{this.productes=m(),console.log("Response: ",a)}),this.cerrarDialog()}catch{console.log("No ha sido posible actualizar la información")}},async deleteData(e){ye(e),this.productes=m().then(a=>{console.log(a),console.log(this.productes)})},logout(){this.$store.dispatch("logout").then(()=>{this.$router.push("/")})},async submit(){this.loading=!0,this.$store.commit("setEmail",this.usuari.email),this.$store.commit("setPassword",this.usuari.password),this.$store.dispatch("login").then(e=>{this.loading=!1,e?(this.loginInvalid=!1,this.$router.push("/home")):this.loginInvalid=!0})},handleHashing(e){this.usuari.password=_e(e).toUpperCase()}}},Be=_("h1",null,"Identifica't",-1);function Te(e,a,i,t,s,l){return y(),v(ve,{class:"fill-height container"},{default:r(()=>[o(C,{class:"text-center fill-height"},{default:r(()=>[_("div",null,[o(ke,null,{default:r(()=>[Be]),_:1}),o(Ie,{"validate-on":"submit lazy",onSubmit:Ce(l.submit,["prevent"])},{default:r(()=>[o(C,{class:"mx-auto","max-width":"30rem",style:{"margin-top":"10em"}},{default:r(()=>[s.loginInvalid?(y(),v(De,{key:0,density:"compact",type:"error",title:"Error",text:"Usuari o contrasenya incorrectes",style:{"margin-bottom":"1em"}})):be("",!0),o(b,{"hide-details":"auto",label:"Correu electrònic",placeholder:"example@gmail.com",rules:[s.rules.required],type:"email",modelValue:s.usuari.email,"onUpdate:modelValue":a[0]||(a[0]=n=>s.usuari.email=n)},null,8,["rules","modelValue"]),o(b,{style:{"margin-top":"1em"},"append-icon":s.show1?"mdi-eye":"mdi-eye-off",rules:[s.rules.required],type:s.show1?"text":"password",label:"Contrasenya","onClick:append":a[1]||(a[1]=n=>s.show1=!s.show1),onInput:a[2]||(a[2]=n=>l.handleHashing(n.target.value))},null,8,["append-icon","rules","type"])]),_:1}),o(V,{loading:s.loading,type:"submit",style:{"margin-top":"1em"}},{default:r(()=>[Ve(" Iniciar sessió")]),_:1},8,["loading"])]),_:1},8,["onSubmit"])])]),_:1})]),_:1})}const Ae=he(we,[["render",Te]]);export{Ae as default};
